<div ui-view>

                <ul class="breadcrumb" style="margin-bottom: 5px;">
                  <li><a ui-sref="dashboard">Início</a></li>
                  <li><a ui-sref="financeiro">Opçoes</a></li>
                  <li class="active">Fluxo de caixa</li>
                </ul> <br>

                <div class="panel panel-default">
                    <div class="panel-heading">Fluxo de caixa</div>
                    <div class="panel-body">
                        <div class="control-group">
                            <form class="form-inline" ng-submit="vm.filtrar()">
                              <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 form-group">
                                  <label for="vencDespesa">De:</label>
                                  <input type="text" class="form-control"
                                  ng-change="vm.filtrar()"
                                  ng-click="openDe = true"
                                  uib-datepicker-popup="dd/MM/yyyy"
                                  ng-model="vm.filtro.vencimento.$gte"
                                  is-open="openDe"
                                  close-text="Fechar"
                                  clear-text="Limpar"
                                  current-text="Hoje" />
                              </div>
                              <div class="col-lg-2 col-md-2 col-sm-12 col-xs-12 form-group">
                                  <label for="vencDespesa">Até:</label>
                                  <input type="text" class="form-control"
                                  ng-change="vm.filtrar()"
                                  ng-click="openAte = true"
                                  uib-datepicker-popup="dd/MM/yyyy"
                                  ng-model="vm.filtro.vencimento.$lte"
                                  is-open="openAte"
                                  close-text="Fechar"
                                  clear-text="Limpar"
                                  current-text="Hoje" />
                              </div>

                              <div class="col-md-12 col-xs-12">
                                  <a ng-click="vm.removerFiltros()" href="">Remover filtros</a>
                              </div>
                            </form>
                        </div>

                        <table class="table table-hover">
                            <thead>
                                <tr>
                                    <th>Data</th>
                                    <th>Recebimentos</th>
                                    <th>Pagamentos</th>
                                    <th>Saldo Final</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="trClick" ng-repeat="item in vm.lista" ng-class="{'info': item.recebimentos || item.pagamentos, 'text-muted': vm.validarDisabled(item)}" ng-click="vm.getDetails(item)">
                                    <td>{{item.vencimento | date: 'dd/MM/yyyy'}}</td>
                                    <td>{{item.recebimentos | currency: 'R$ '}}</td>
                                    <td>{{item.pagamentos | currency: 'R$ '}}</td>
                                    <td>{{item.saldo | currency: 'R$ '}}</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
</div>



<!-- Modal -->
<script type="text/ng-template" id="myModalContent.html">
      <div class="modal-header">
          <h3 class="modal-title">Detalhes do vencimento: {{vencimento | date: 'dd/MM/yyyy'}}</h3>
      </div>
      <div class="modal-body">
            <div class="row" ng-show="receitas.length">
                <div class="col-md-12">
                  <p class="text-success">Receitas</p>
                  <table class="table table-hover">
                   <thead>
                        <tr>
                            <th>Cliente</th>
                            <th>Valor</th>
                            <th>Quitada</th>
                            <th>Juros</th>
                            <th>Descontos</th>
                            <th>Valor Pago</th>
                            <th>Opções</th>

                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="item in receitas" ng-class="{'warning': validarAviso(item), 'danger': validarHojeOuAtraso(item), 'success': item.recebido}">
                            <td width="200">{{item.cliente.nome}}</td>
                            <td>{{item.valor | currency: 'R$ '}}</td>
                            <td>{{item.recebido ? (item.dataPagamento | date: 'dd/MM/yyyy' : '+0300') : ''}}</td>
                            <td>{{item.recebido ? (item.juros | currency: 'R$ ') : ''}}</td>
                            <td>{{item.recebido ? (item.desconto | currency: 'R$ ') : ''}}</td>
                            <td>{{item.valorPago | currency: 'R$ '}}</td>
                            <td>
                               <a target="_blank" ng-show="!item.recebido" href="javascript:;" ng-click="editarReceita(item)">editar</a>
                               <span ng-show="!item.recebido"> | </span>
                               <a target="_blank" ng-show="!item.recebido" href="/#/receitas/quitar/{{item._id}}">quitar</a>
                               <a target="_blank" ng-show="item.recebido" href="/#/receitas/quitar/{{item._id}}">desfazer quitação</a>
                            </td>
                        </tr>
                    </tbody>
                  </table>
                </div>
            </div>

            <div class="row" ng-show="despesas.length">
              <div class="col-md-12">
                <p class="text-danger">Despesas</p>
                <table class="table table-hover">
                 <thead>
                      <tr>
                          <th>Fornecedor</th>
                          <th>Valor</th>
                          <th>Quitada</th>
                          <th>Juros</th>
                          <th>Descontos</th>
                          <th>Valor Pago</th>
                          <th>Opções</th>
                      </tr>
                  </thead>
                  <tbody>
                      <tr ng-repeat="item in despesas" ng-class="{'warning': validarAviso(item), 'danger': validarHojeOuAtraso(item), 'success': item.recebido}">
                          <td width="200">{{item.fornecedor.nome}}</td>
                          <td>{{item.valor | currency: 'R$ '}}</td>
                          <td>{{item.recebido ? (item.dataPagamento | date: 'dd/MM/yyyy' : '+0300') : ''}}</td>
                          <td>{{item.recebido ? (item.juros | currency: 'R$ ') : ''}}</td>
                          <td>{{item.recebido ? (item.desconto | currency: 'R$ ') : ''}}</td>
                          <td>{{item.valorPago | currency: 'R$ '}}</td>
                          <td>
                             <a target="_blank" ng-show="!item.recebido" href="javascript:;" ng-click="editarDespesa(item)">editar</a>
                             <span ng-show="!item.recebido"> | </span>
                             <a target="_blank" ng-show="!item.recebido" href="/#/despesas/quitar/{{item._id}}">quitar</a>
                             <a target="_blank" ng-show="item.recebido" href="/#/despesas/quitar/{{item._id}}">desfazer quitação</a>
                          </td>
                      </tr>
                  </tbody>
                </table>
              </div>
            </div>
      </div>
      <div class="modal-footer">
          <button class="btn btn-warning" type="button" ng-click="cancel()">Fechar</button>
      </div>
  </script>